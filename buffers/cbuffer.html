<!DOCTYPE html>
<html>
<head>
<title>Contact Sam Cruise: Character buffers</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="CharacterBuffers">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Contact Sam Cruise" src="../images/logo.png" /></a></td>
<td class="page-header">Character buffers</td>
</tr>
</table>
<p>The character buffers occupy bytes 0-24 in pages 215-221 and bytes 0-31 in pages 222-230.</p>
<p>The buffers in pages 215-221 are each shared by a group of five minor characters. Which one of the five characters 'owns' the buffer at any one time depends on the portion of the play area that is currently on screen. When the screen scrolls left or right, ownership of one of the buffers switches to the next or previous character in the group. See the routines at <a href="../asm/F18E.html">F18E</a> and <a href="../asm/F1BA.html">F1BA</a>.</p>
<p>The buffers in pages 222-230 are used mostly by the principal characters, depending on the current <a href="../asm/7FEE.html">game mode</a> (0-4).</p>
<table class="cbuffer">
<tr>
<th colspan="1" rowspan="1">Page</th>
<th colspan="1" rowspan="1">Address</th>
<th colspan="1" rowspan="1">Character</th>
<td class="transparent" colspan="1" rowspan="1"></td>
<th colspan="1" rowspan="1">Page</th>
<th colspan="1" rowspan="1">Address</th>
<th colspan="1" rowspan="1">Character</th>
<td class="transparent" colspan="1" rowspan="1"></td>
<th colspan="1" rowspan="1">Page</th>
<th colspan="1" rowspan="1">Address</th>
<th colspan="1" rowspan="1">Character</th>
</tr>
<tr>
<td class="cbufPage" colspan="1" rowspan="1">215</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/D700.html">D700</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">221</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/DD00.html">DD00</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">227</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E300.html">E300</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Sniper (modes 1-4)</td>
</tr>
<tr>
<td class="cbufPage" colspan="1" rowspan="1">216</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/D800.html">D800</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">222</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/DE00.html">DE00</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Policeman (modes 0-3)</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">228</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E400.html">E400</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Banknote</td>
</tr>
<tr>
<td class="cbufPage" colspan="1" rowspan="1">217</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/D900.html">D900</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">223</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/DF00.html">DF00</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Policeman (modes 1-3)</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">229</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E500.html">E500</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Banknote; hook</td>
</tr>
<tr>
<td class="cbufPage" colspan="1" rowspan="1">218</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/DA00.html">DA00</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">224</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E000.html">E000</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Gangster</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">230</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E600.html">E600</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Sam</td>
</tr>
<tr>
<td class="cbufPage" colspan="1" rowspan="1">219</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/DB00.html">DB00</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">225</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E100.html">E100</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Fat Man (mode 2); Lana (mode 3)</td>
</tr>
<tr>
<td class="cbufPage" colspan="1" rowspan="1">220</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/DC00.html">DC00</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Various</td>
<td class="transparent" colspan="1" rowspan="1"></td>
<td class="cbufPage" colspan="1" rowspan="1">226</td>
<td class="cbufAddress" colspan="1" rowspan="1"><a href="../asm/E200.html">E200</a></td>
<td class="cbufCharacter" colspan="1" rowspan="1">Daisy (modes 0-3)</td>
</tr>
</table>
<p>The bytes in each character buffer are used as follows:</p>
<table class="cbuffer">
<tr>
<th>Byte(s)</th>
<th>Contents</th>
</tr>
<tr>
<td class="cbufBytes" rowspan="1">0</td>
<td class="cbufByteDesc">
Animatory state
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">1,2</td>
<td class="cbufByteDesc">
Location (x, y)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">3</td>
<td class="cbufByteDesc">
Various flags:
<table class="default">
<tr>
<th colspan="1" rowspan="1">Bit(s)</th>
<th colspan="1" rowspan="1">Meaning if set</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">0-3</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">4</td>
<td class="" colspan="1" rowspan="1">Unused (always reset, but checked by <a href="../asm/F1FC.html">F1FC</a>)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">5</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">6</td>
<td class="" colspan="1" rowspan="1">Character should be moved (see <a href="../asm/F1FC.html">F1FC</a>)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">7</td>
<td class="" colspan="1" rowspan="1">Character is running (see <a href="../asm/F1FC.html">F1FC</a>)</td>
</tr>
</table>
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">4</td>
<td class="cbufByteDesc">
z-coordinate: 1=indoors; 2=outside, behind people on the sidewalk; 4=on the sidewalk or road; 8=invisible
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">5</td>
<td class="cbufByteDesc">
Post-midstride animatory state (see <a href="../asm/EBBB.html">EBBB</a>, <a href="../asm/EC5A.html">EC5A</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">6</td>
<td class="cbufByteDesc">
Post-midstride x-coordinate  (see <a href="../asm/EBBB.html">EBBB</a>, <a href="../asm/EC5A.html">EC5A</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">7</td>
<td class="cbufByteDesc">
Post-midstride y-coordinate  (see <a href="../asm/EBBB.html">EBBB</a>, <a href="../asm/EC5A.html">EC5A</a>, <a href="../asm/ECE1.html">ECE1</a>, <a href="../asm/FB52.html">FB52</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="2">8</td>
<td class="cbufByteDesc">
LSB of the primary command routine address (see <a href="../asm/F1FC.html">F1FC</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Sam's main action timer (see <a href="../asm/6100.html">6100</a>, <a href="../asm/64BD.html">64BD</a>, <a href="../asm/71DD.html">71DD</a>, <a href="../asm/74D8.html">74D8</a>, <a href="../asm/77D3.html">77D3</a>, <a href="../asm/ECE1.html">ECE1</a>, <a href="../asm/F02B.html">F02B</a>, <a href="../asm/FB52.html">FB52</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="2">9</td>
<td class="cbufByteDesc">
MSB of the primary command routine address (see <a href="../asm/F1FC.html">F1FC</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Sam's midstride/mid-action timer (see <a href="../asm/71DD.html">71DD</a>, <a href="../asm/ECE1.html">ECE1</a>, <a href="../asm/F02B.html">F02B</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="4">10</td>
<td class="cbufByteDesc">
Destination x-coordinate (see <a href="../asm/7083.html">7083</a>, <a href="../asm/7190.html">7190</a>, <a href="../asm/72B1.html">72B1</a>, <a href="../asm/7996.html">7996</a>, <a href="../asm/7C40.html">7C40</a>, <a href="../asm/7CC8.html">7CC8</a>, <a href="../asm/ED8C.html">ED8C</a>, <a href="../asm/F600.html">F600</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Walkabout origin x-coordinate (see <a href="../asm/F748.html">F748</a>, <a href="../asm/F82A.html">F82A</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Counter used by the sniper to decide when to appear (see <a href="../asm/62DB.html">62DB</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
1 if the banknote has just been landed on by Sam, 0 otherwise (see <a href="../asm/634C.html">634C</a>, <a href="../asm/63C3.html">63C3</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="3">11</td>
<td class="cbufByteDesc">
Destination y-coordinate (see <a href="../asm/7190.html">7190</a>, <a href="../asm/72B1.html">72B1</a>, <a href="../asm/7996.html">7996</a>, <a href="../asm/7CC8.html">7CC8</a>, <a href="../asm/ED8C.html">ED8C</a>, <a href="../asm/F600.html">F600</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Walkabout destination x-coordinate for a cat (see <a href="../asm/F82A.html">F82A</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
LSB of the address of the door knock status flags for the door (if any) that the character is on duty for (see <a href="../asm/7A6A.html">7A6A</a>, <a href="../asm/F748.html">F748</a>, <a href="../asm/F820.html">F820</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="3">12</td>
<td class="cbufByteDesc">
Roll/somersault animation phase table entry address LSB (see <a href="../asm/64BD.html">64BD</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Destination location identifier (see <a href="../asm/7083.html">7083</a>, <a href="../asm/7190.html">7190</a>, <a href="../asm/72B1.html">72B1</a>, <a href="../asm/7996.html">7996</a>, <a href="../asm/7C40.html">7C40</a>, <a href="../asm/7CC8.html">7CC8</a>, <a href="../asm/ED8C.html">ED8C</a>, <a href="../asm/F600.html">F600</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Walkabout duration indicator (0=indefinite, 255=finite) (see <a href="../asm/7A6A.html">7A6A</a>, <a href="../asm/F748.html">F748</a>, <a href="../asm/F820.html">F820</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="6">13</td>
<td class="cbufByteDesc">
Roll/somersault animation phase table entry address MSB (see <a href="../asm/64BD.html">64BD</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
0 if Sam has only just met Lana, 1 otherwise (see <a href="../asm/6100.html">6100</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Pre-knockout animatory state (see <a href="../asm/FA05.html">FA05</a>, <a href="../asm/FA83.html">FA83</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Number of mini-walkabouts remaining (see <a href="../asm/7A6A.html">7A6A</a>, <a href="../asm/F748.html">F748</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Location/destination indicator: 2 if the character is not on the sidewalk or the road, and is not in the same region as his destination; 1 if the character is not on the sidewalk or the road, and is in the same region as his destination; 0 if the character is on the sidewalk or the road, or on the front steps of the hotel but heading somewhere other than the hotel (see <a href="../asm/7C40.html">7C40</a>, <a href="../asm/ED8C.html">ED8C</a>, <a href="../asm/F600.html">F600</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
1 if Sam has stepped off or been dropped off the the roof of a building to the ground from a great enough height that he could be knocked out when he lands; 0 otherwise (see <a href="../asm/FAE3.html">FAE3</a>, <a href="../asm/FB52.html">FB52</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="1">14,15</td>
<td class="cbufByteDesc">
Interruptible subcommand routine address (see <a href="../asm/F1FC.html">F1FC</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="6">16</td>
<td class="cbufByteDesc">
Walkabout destination x-coordinate (see <a href="../asm/F6E9.html">F6E9</a>, <a href="../asm/F748.html">F748</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Intermediate destination x-coordinate (see <a href="../asm/F5CE.html">F5CE</a>, <a href="../asm/F600.html">F600</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Intermediate destination y-coordinate (see <a href="../asm/F5AC.html">F5AC</a>, <a href="../asm/F600.html">F600</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Counter used by the sniper to decide when to duck and when to shoot (see <a href="../asm/621E.html">621E</a>, <a href="../asm/62DB.html">62DB</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
LSB of the address of the door knock status flags (see <a href="../asm/7FAA.html">7FAA</a>) for the door the character has knocked on (see <a href="../asm/F346.html">F346</a>, <a href="../asm/F359.html">F359</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Counter that determines how much longer a policeman will keep knocking on a door before busting it open (see <a href="../asm/F375.html">F375</a>, <a href="../asm/F383.html">F383</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="3">17</td>
<td class="cbufByteDesc">
Delay counter used by the sniper after firing a bullet (see <a href="../asm/621E.html">621E</a>, <a href="../asm/62DB.html">62DB</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Counter that determines how much longer the character will wait for a door to be opened before giving up (see <a href="../asm/F346.html">F346</a>, <a href="../asm/F359.html">F359</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Counter that determines the delay until the character will consider flipping a light switch or raising or lowering a window blind (see <a href="../asm/F6E9.html">F6E9</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="1">18,19</td>
<td class="cbufByteDesc">
Uninterruptible subcommand routine address (see <a href="../asm/F1FC.html">F1FC</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="4">20</td>
<td class="cbufByteDesc">
Telephone dialling sound effect counter (see <a href="../asm/77D3.html">77D3</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Distance remaining for the hook to fly (see <a href="../asm/7BE1.html">7BE1</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Knockout and recovery delay counter (see <a href="../asm/FA05.html">FA05</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Animation phase counter used when a character has just stepped off the roof of a building (see <a href="../asm/FAE3.html">FAE3</a>, <a href="../asm/FB52.html">FB52</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="2">21</td>
<td class="cbufByteDesc">
Pre-knockout x-coordinate (see <a href="../asm/FA05.html">FA05</a>, <a href="../asm/FA83.html">FA83</a>)
</td>
</tr>
<tr>
<td class="cbufByteDesc">
Landing y-coordinate (see <a href="../asm/FB52.html">FB52</a>)
</td>
</tr>
<tr>
<td class="cbufBytes" rowspan="1">22</td>
<td class="cbufByteDesc">
Offset of the point reached in the current command list (relative to the start) (see <a href="../asm/F15F.html">F15F</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">23,24</td>
<td class="cbufByteDesc">
Start address of the command list (see <a href="../asm/F15F.html">F15F</a>, <a href="../asm/F1FC.html">F1FC</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">25,26</td>
<td class="cbufByteDesc">
Unused (but see <a href="../asm/F1FC.html">F1FC</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">27,28</td>
<td class="cbufByteDesc">
Unused (but checked by <a href="../asm/F1FC.html">F1FC</a> for a continual subcommand routine address)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">29</td>
<td class="cbufByteDesc">
ID of Sam's disguise (bits 5-7) when he was last spotted (but not recognised) by the policeman, and the corresponding disguise timeout counter (bits 0-4) (see <a href="../asm/71AC.html">71AC</a>, <a href="../asm/7222.html">7222</a>, <a href="../asm/72B1.html">72B1</a>, <a href="../asm/7377.html">7377</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">30</td>
<td class="cbufByteDesc">
Sam's x-coordinate when he was last spotted by the policeman while wearing a disguise unknown to the police (see <a href="../asm/71AC.html">71AC</a>, <a href="../asm/7222.html">7222</a>)
</td>
</tr>

<tr>
<td class="cbufBytes" rowspan="1">31</td>
<td class="cbufByteDesc">
Sam's y-coordinate (bits 0-5) and z-coordinate (bits 6-7) when he was last spotted by the policeman while wearing a disguise unknown to the police (see <a href="../asm/71AC.html">71AC</a>, <a href="../asm/7222.html">7222</a>)
</td>
</tr>

</table>
<footer>
<div class="release">The complete Contact Sam Cruise RAM disassembly 20160123</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2016 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 5.1.</div>
</footer>
</body>
</html>