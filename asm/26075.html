<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Sam Cruise: Routine at 26075</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../csc.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="Contact Sam Cruise" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="26002.html">26002</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#26075">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="26222.html">26222</a></span></td>
</tr>
</table>
<div class="description">26075: Move and draw the bullets</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="61568.html">61568</a>. For each bullet currently in flight, calculates the bullet's next location and draws it there (unless it has hit Sam).
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26075"></a>26075</td>
<td class="instruction">LD HL,32743</td>
<td class="comment-11" rowspan="1"><a class="link" href="32743.html">32743</a> holds the bullet timer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26078"></a>26078</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-11" rowspan="1">Is it time to move and redraw the bullets?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26079"></a>26079</td>
<td class="instruction">RET NZ</td>
<td class="comment-11" rowspan="1">Return if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26080"></a>26080</td>
<td class="instruction">LD A,(32671)</td>
<td class="comment-11" rowspan="1">Collect the MSB of Sam's cash supply</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26083"></a>26083</td>
<td class="instruction">LD C,3</td>
<td class="comment-11" rowspan="2">Keep only bits 0 and 1 of the MSB</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26085"></a>26085</td>
<td class="instruction">AND C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26086"></a>26086</td>
<td class="instruction">XOR C</td>
<td class="comment-11" rowspan="2"><span class="register">A</span>=6-<span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26087"></a>26087</td>
<td class="instruction">ADD A,C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26088"></a>26088</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Reinitialise the bullet timer at <a class="link" href="32743.html">32743</a> to 3, 4, 5 or 6</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26089"></a>26089</td>
<td class="instruction">LD L,192</td>
<td class="comment-11" rowspan="1"><span class="register">HL</span>=<a class="link" href="32704.html">32704</a> (first byte of bullet buffer 1)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26091"></a>
<div class="comments">
<div class="paragraph">
The following loop checks each bullet to see whether it is in flight or has flown off the screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26091"></a>26091</td>
<td class="instruction">LD DE,(32766)</td>
<td class="comment-11" rowspan="1">Collect the x- and y-coordinates of the top-left tile of the play area on screen in <span class="register">E</span> and <span class="register">D</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26095"></a>26095</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=x-coordinate of the leftmost column of the play area that was on screen the last time the bullet was drawn</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26096"></a>26096</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-11" rowspan="1">Replace that x-coordinate with the current value</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26097"></a>26097</td>
<td class="instruction">SUB E</td>
<td class="comment-11" rowspan="3"><span class="register">A</span>=bullet's current screen x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26098"></a>26098</td>
<td class="instruction">INC HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26099"></a>26099</td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26100"></a>26100</td>
<td class="instruction">LD E,A</td>
<td class="comment-11" rowspan="1">Copy this to <span class="register">E</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26101"></a>26101</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Also store it in the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26102"></a>26102</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the third byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26103"></a>26103</td>
<td class="instruction">CP 32</td>
<td class="comment-11" rowspan="1">Has the bullet flown off screen to the right?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26105"></a>26105</td>
<td class="instruction">JR NC,26111</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26107"></a>26107</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=bullet's current screen y-coordinate (or 0 if the bullet is not in flight)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26108"></a>26108</td>
<td class="instruction">AND A</td>
<td class="comment-11" rowspan="1">Is the bullet in flight at the moment?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26109"></a>26109</td>
<td class="instruction">JR NZ,26120</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26111"></a>26111</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-11" rowspan="1">Set byte 3 of the bullet's buffer to 0, indicating that it is not in flight</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26113"></a>26113</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the last byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26114"></a>26114</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the first byte of the next bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26115"></a>26115</td>
<td class="instruction">BIT 3,L</td>
<td class="comment-11" rowspan="1">Have we dealt with both bullets yet?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26117"></a>26117</td>
<td class="instruction">JR Z,26091</td>
<td class="comment-11" rowspan="1">Jump back if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26119"></a>26119</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26120"></a>
<div class="comments">
<div class="paragraph">
This bullet is currently in flight.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26120"></a>26120</td>
<td class="instruction">LD A,D</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=y-coordinate of the topmost row of the play area on screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26121"></a>26121</td>
<td class="instruction">CP 20</td>
<td class="comment-11" rowspan="1">Is the sidewalk on screen at the moment?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26123"></a>26123</td>
<td class="instruction">JR NZ,26111</td>
<td class="comment-11" rowspan="1">Terminate the bullet if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26125"></a>26125</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=bullet's current screen y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26126"></a>26126</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Save the pointer to the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26127"></a>26127</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-11" rowspan="1">Transfer the bullet's screen x- and y-coordinates to <span class="register">L</span> and <span class="register">H</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26128"></a>26128</td>
<td class="instruction">CALL <a class="link" href="59148.html">59148</a></td>
<td class="comment-11" rowspan="1">Print the play area tile at these coordinates, thus erasing the bullet</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26131"></a>26131</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the bullet buffer pointer to <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26132"></a>26132</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the fourth byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26133"></a>26133</td>
<td class="instruction">LD A,32</td>
<td class="comment-11" rowspan="3">Flip bit 5 of this byte</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26135"></a>26135</td>
<td class="instruction">XOR (HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26136"></a>26136</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26137"></a>26137</td>
<td class="instruction">DEC HL</td>
<td class="comment-11" rowspan="2">Point <span class="register">HL</span> at the second byte of the bullet buffer (which holds the bullet's screen x-coordinate)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26138"></a>26138</td>
<td class="instruction">DEC HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26139"></a>26139</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-11" rowspan="1">Decrement the bullet's screen x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26140"></a>26140</td>
<td class="instruction">ADD A,A</td>
<td class="comment-11" rowspan="1">Is the bullet flying leftwards?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26141"></a>26141</td>
<td class="instruction">JR NC,26145</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26143"></a>26143</td>
<td class="instruction">INC (HL)</td>
<td class="comment-11" rowspan="2">Otherwise increment the bullet's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26144"></a>26144</td>
<td class="instruction">INC (HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26145"></a>26145</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">E</span>=bullet's next screen x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26146"></a>26146</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the third byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26147"></a>26147</td>
<td class="instruction">BIT 5,E</td>
<td class="comment-11" rowspan="1">Would the bullet now be off-screen to the left or right?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26149"></a>26149</td>
<td class="instruction">JR NZ,26111</td>
<td class="comment-11" rowspan="1">Terminate the bullet if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26151"></a>26151</td>
<td class="instruction">ADD A,A</td>
<td class="comment-11" rowspan="1">Is the bullet flying perfectly horizontally?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26152"></a>26152</td>
<td class="instruction">JR NC,26188</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26154"></a>
<div class="comments">
<div class="paragraph">
The bullet is flying at an angle towards the ground or the sky.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26154"></a>26154</td>
<td class="instruction">ADD A,A</td>
<td class="comment-11" rowspan="1">Push what was bit 5 of the fourth byte of the bullet buffer into the carry flag (and ignore it)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26155"></a>26155</td>
<td class="instruction">NOP</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26156"></a>26156</td>
<td class="instruction">NOP</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26157"></a>26157</td>
<td class="instruction">ADD A,A</td>
<td class="comment-11" rowspan="1">Set the carry flag if the bullet is flying towards the sky</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26158"></a>26158</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the fourth byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26159"></a>26159</td>
<td class="instruction">JR C,26178</td>
<td class="comment-11" rowspan="1">Jump if the bullet is flying towards the sky</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26161"></a>
<div class="comments">
<div class="paragraph">
The bullet is flying at an angle towards the ground.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26161"></a>26161</td>
<td class="instruction">RES 3,(HL)</td>
<td class="comment-11" rowspan="1">Reset bit 3 to prevent overflow (which would affect bits 4-7)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26163"></a>26163</td>
<td class="instruction">INC (HL)</td>
<td class="comment-11" rowspan="1">Increment the pixel row counter in bits 0-2</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26164"></a>26164</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick up the fourth byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26165"></a>26165</td>
<td class="instruction">AND 7</td>
<td class="comment-11" rowspan="1">Keep only bits 0-2 (the pixel row counter)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26167"></a>26167</td>
<td class="instruction">DEC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the third byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26168"></a>26168</td>
<td class="instruction">JR NZ,26188</td>
<td class="comment-11" rowspan="1">Jump unless the pixel row counter rolled over from 7 to 0</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26170"></a>26170</td>
<td class="instruction">INC (HL)</td>
<td class="comment-11" rowspan="1">Increment the bullet's screen y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26171"></a>26171</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=bullet's next screen y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26172"></a>26172</td>
<td class="instruction">CP 20</td>
<td class="comment-11" rowspan="1">Has the bullet flown off the bottom of the screen?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26174"></a>26174</td>
<td class="instruction">JR Z,26111</td>
<td class="comment-11" rowspan="1">Terminate it if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26176"></a>26176</td>
<td class="instruction">JR 26188</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26178"></a>
<div class="comments">
<div class="paragraph">
The bullet is flying at an angle towards the sky.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26178"></a>26178</td>
<td class="instruction">SET 3,(HL)</td>
<td class="comment-11" rowspan="1">Set bit 3 to prevent underflow (which would affect bits 4-7)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26180"></a>26180</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick up the fourth byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26181"></a>26181</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-11" rowspan="1">Decrement the pixel row counter in bits 0-2</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26182"></a>26182</td>
<td class="instruction">AND 7</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=previous value of the pixel row counter (0-7)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26184"></a>26184</td>
<td class="instruction">DEC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the third byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26185"></a>26185</td>
<td class="instruction">JR NZ,26188</td>
<td class="comment-11" rowspan="1">Jump unless the pixel row counter rolled over from 0 to 7</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26187"></a>26187</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-11" rowspan="1">Decrement the bullet's screen y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="26188"></a>26188</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=bullet's next screen y-coordinate</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26189"></a>
<div class="comments">
<div class="paragraph">
Having calculated where the bullet is going next, we check whether it would hit Sam.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26189"></a>26189</td>
<td class="instruction">CALL <a class="link" href="26002.html">26002</a></td>
<td class="comment-11" rowspan="1">Would the bullet hit Sam?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26192"></a>26192</td>
<td class="instruction">JR C,26111</td>
<td class="comment-11" rowspan="1">Terminate the bullet if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="26194"></a>
<div class="comments">
<div class="paragraph">
The bullet has not flown off the screen or hit Sam, so now we draw it.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26194"></a>26194</td>
<td class="instruction">LD A,D</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=bullet's next screen y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26195"></a>26195</td>
<td class="instruction">AND 7</td>
<td class="comment-11" rowspan="10">Point <span class="register">DE</span> at the top pixel row of the screen cell in which the bullet will be drawn</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26197"></a>26197</td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26198"></a>26198</td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26199"></a>26199</td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26200"></a>26200</td>
<td class="instruction">ADD A,E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26201"></a>26201</td>
<td class="instruction">LD E,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26202"></a>26202</td>
<td class="instruction">LD A,D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26203"></a>26203</td>
<td class="instruction">AND 24</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26205"></a>26205</td>
<td class="instruction">ADD A,64</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26207"></a>26207</td>
<td class="instruction">LD D,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26208"></a>26208</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the fourth byte of the bullet buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26209"></a>26209</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="4">Point <span class="register">DE</span> at the exact pixel row of the screen cell in which the bullet will be drawn</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26210"></a>26210</td>
<td class="instruction">AND 7</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26212"></a>26212</td>
<td class="instruction">ADD A,D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26213"></a>26213</td>
<td class="instruction">LD D,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26214"></a>26214</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-11" rowspan="1">Pick up the current pixel row from the display file</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26215"></a>26215</td>
<td class="instruction">OR 60</td>
<td class="comment-11" rowspan="1">Set bits 2-5</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26217"></a>26217</td>
<td class="instruction">AND 189</td>
<td class="comment-11" rowspan="1">Reset bits 6 and 1</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26219"></a>26219</td>
<td class="instruction">LD (DE),A</td>
<td class="comment-11" rowspan="1">Draw the bullet</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="26220"></a>26220</td>
<td class="instruction">JR 26114</td>
<td class="comment-11" rowspan="1">Jump back to deal with the next bullet</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="26002.html">26002</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#26075">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="26222.html">26222</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Contact Sam Cruise RAM disassembly 20150417</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2015 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.3.</div>
</div>
</body>
</html>