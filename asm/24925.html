<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Sam Cruise: Routine at 24925</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../microsphere.css" />
<link rel="stylesheet" type="text/css" href="../csc.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="24924.html">24924</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#24925">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="24951.html">24951</a></span></td>
</tr>
</table>
<div class="description">24925: Reset a gangster's location and restart the command list</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the command list at <a class="link" href="25066.html">25066</a>. Makes the gangster at no. 15 return to no. 15 instantly after dropping Sam off the roof of no. 19, and restarts his command list.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">224 (Gangster)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="24925"></a>24925</td>
<td class="instruction">LD DE,6648</td>
<td class="comment-11" rowspan="1"><span class="register">E</span>=248, <span class="register">D</span>=25 (coordinates of the spot where the gangster at no. 15 waits for Sam)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24928"></a>24928</td>
<td class="instruction">LD A,1</td>
<td class="comment-11" rowspan="1">1=z-coordinate (indoors)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24930"></a>24930</td>
<td class="instruction">JR 24937</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="24932"></a>
<div class="comments">
<div class="paragraph">
This entry point is used by the command list at <a class="link" href="64902.html">64902</a>; it makes the gangster who watches for Sam outside the police station return instantly to the police station after dropping Sam off the roof of no. 19, and restarts his command list.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24932"></a>24932</td>
<td class="instruction">LD DE,8851</td>
<td class="comment-11" rowspan="1"><span class="register">E</span>=147, <span class="register">D</span>=34 (coordinates of the base location of the gangster who watches for Sam outside the police station)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24935"></a>24935</td>
<td class="instruction">LD A,4</td>
<td class="comment-11" rowspan="1">4=z-coordinate (on the sidewalk)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="24937"></a>24937</td>
<td class="instruction">LD L,4</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at byte 4 of the gangster's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24939"></a>24939</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="6">Set the gangster's x-, y- and z-coordinates</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24940"></a>24940</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24941"></a>24941</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24942"></a>24942</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24943"></a>24943</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24944"></a>24944</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24945"></a>24945</td>
<td class="instruction">DEC L</td>
<td class="comment-11" rowspan="2">Set the gangster's animatory state to <a class="link" href="../graphics/as.html#160">160</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24946"></a>24946</td>
<td class="instruction">LD (HL),160</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="24948"></a>24948</td>
<td class="instruction">JP <a class="link" href="63198.html">63198</a></td>
<td class="comment-11" rowspan="1">Restart the gangster's command list</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="24924.html">24924</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#24925">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="24951.html">24951</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Contact Sam Cruise RAM disassembly 20140614</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 4.0.</div>
</div>
</body>
</html>