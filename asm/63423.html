<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Sam Cruise: Routine at 63423</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../csc.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="Contact Sam Cruise" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="63409.html">63409</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#63423">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="63437.html">63437</a></span></td>
</tr>
</table>
<div class="description">63423: Make a character open a door that has been knocked on</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the command lists at <a class="link" href="64846.html">64846</a>, <a class="link" href="65059.html">65059</a>, <a class="link" href="65112.html">65112</a> and <a class="link" href="65143.html">65143</a>. Opens the door that the character is standing behind, and then rewinds the command list such that the character returns to the spot where he was walking up and down before going to answer the door.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Character number (215-229)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="63423"></a>63423</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Save the character number briefly</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63424"></a>63424</td>
<td class="instruction">CALL <a class="link" href="62216.html#62252">62252</a></td>
<td class="comment-11" rowspan="1">Open the door</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63427"></a>63427</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the character number to <span class="register">H</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63428"></a>63428</td>
<td class="instruction">LD L,22</td>
<td class="comment-11" rowspan="1">Byte 22 of the character's buffer holds the offset of the point reached in the command list</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63430"></a>63430</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="3">Subtract 14 from this offset; this has the effect of sending the character back to the spot where he was walking up and down before answering the door</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63431"></a>63431</td>
<td class="instruction">SUB 14</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63433"></a>63433</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="63434"></a>63434</td>
<td class="instruction">JP <a class="link" href="62080.html">62080</a></td>
<td class="comment-11" rowspan="1">Terminate this primary command</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="63409.html">63409</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#63423">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="63437.html">63437</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Contact Sam Cruise RAM disassembly 20150417</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2015 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.3.</div>
</div>
</body>
</html>