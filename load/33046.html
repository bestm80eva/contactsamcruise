<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Sam Cruise: Routine at 33046</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../microsphere.css" />
<link rel="stylesheet" type="text/css" href="../csc.css" />

</head>
<body class="load-Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Load routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="33024.html">33024</a></span></td>
<td class="up">Up: <a class="link" href="load.html#33046">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="33064.html">33064</a></span></td>
</tr>
</table>
<div class="description">33046: Copy data into addresses 33149-65506 (step 247)</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="32956.html">32956</a>. Copies the 132 bytes from the data table at <a class="link" href="33064.html">33064</a> into addresses 33149-65506 (step 247). This is done before loading the standard speed code block because the data for those addresses is not present in that code block (except for 33149, which is present on the tape, but is not loaded).
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">33064</td>
</tr>
<tr>
<td class="register">BC'</td>
<td class="register-desc">247</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="33046"></a>33046</td>
<td class="instruction">EXX</td>
<td class="comment-11" rowspan="3">Set <span class="register">HL'</span> to the first destination address (minus 247)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33047"></a>33047</td>
<td class="instruction">LD HL,32902</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33050"></a>33050</td>
<td class="instruction">EXX</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33051"></a>33051</td>
<td class="instruction">LD B,132</td>
<td class="comment-11" rowspan="1">There are 132 bytes to copy</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="33053"></a>33053</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick up a byte from the data table at <a class="link" href="33064.html">33064</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33054"></a>33054</td>
<td class="instruction">EXX</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33055"></a>33055</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">Add 247 to <span class="register">HL'</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33056"></a>33056</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Copy the byte to its destination</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33057"></a>33057</td>
<td class="instruction">EXX</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33058"></a>33058</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Move <span class="register">HL</span> along to the next byte in the data table</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33059"></a>33059</td>
<td class="instruction">DJNZ 33053</td>
<td class="comment-11" rowspan="1">Jump back until all 132 bytes have been copied</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="33061"></a>33061</td>
<td class="instruction">JP <a class="link" href="32815.html">32815</a></td>
<td class="comment-11" rowspan="1">Load the standard speed code block</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="33024.html">33024</a></span></td>
<td class="up">Up: <a class="link" href="load.html#33046">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="33064.html">33064</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Contact Sam Cruise RAM disassembly 20140614</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 4.0.</div>
</div>
</body>
</html>